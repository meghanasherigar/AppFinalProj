{"version":3,"file":"ngx-nestable-lib.umd.min.js","sources":["~/ngx-nestable/lib/lib/src/nestable.helper.ts","~/ngx-nestable/lib/lib/src/nestable.constant.ts","~/ngx-nestable/lib/lib/src/nestable.component.ts","~/ngx-nestable/lib/lib/src/nestable-drag-handle/nestable-drag-handle.directive.ts","~/ngx-nestable/lib/lib/src/nestable-expand-collapse-handle/nestable-expand-collapse.directive.ts","~/ngx-nestable/lib/lib/src/nestable.module.ts"],"sourcesContent":["export const _traverseChildren = (tree, callback, parent = null) => {\n    for (let i = 0; i < tree.length; i++) {\n        const item = tree[i];\n        if (typeof item === 'undefined') { continue; }\n        const callbackResult = callback(item, parent);\n\n        if (callbackResult) { break; }\n\n        if (item.children) {\n            _traverseChildren(item.children, callback, item);\n        }\n    }\n};\n\nexport const _insertAfter = (newNode, referenceNode) => {\n    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n};\n\nexport const _replace = (newNode, referenceNode) => {\n    referenceNode.parentNode.replaceChild(newNode, referenceNode);\n};\n\nexport const _replaceTargetWithElements = (target, elements) => {\n    let i = elements.length;\n\n    if (target.parentNode) {\n        while (i--) {\n            target.parentNode.insertBefore(elements[i], target);\n        }\n\n        /// remove the target.\n        target.parentNode.removeChild(target);\n    }\n};\n\nexport const _getParents = (el, parentSelector = document.body) => {\n\n    const parents = [];\n    let parentNode = el.parentNode;\n\n    while (parentNode !== parentSelector) {\n        const o = parentNode;\n        if (!parentNode) { break; }\n        if (parentNode.tagName === parentSelector.tagName) {\n            parents.push(o);\n        }\n        parentNode = o.parentNode;\n    }\n    parents.push(parentSelector); // Push that parentSelector you wanted to stop at\n\n    return parents;\n};\n\nexport const _closest = (el, selector) => {\n    let matchesFn;\n\n    // find vendor prefix\n    ['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'].some(function (fn) {\n        if (typeof document.body[fn] === 'function') {\n            matchesFn = fn;\n            return true;\n        }\n        return false;\n    });\n\n    let parent;\n\n    // traverse parents\n    while (el) {\n        parent = el.parentElement;\n        if (parent === null) { break; }\n        const matches = parent[matchesFn](selector);\n        if (parent && matches) { return parent; }\n        el = parent;\n    }\n\n    return null;\n};\n\nexport const _offset = (elem) => {\n    let box = { top: 0, left: 0 };\n\n    // BlackBerry 5, iOS 3 (original iPhone)\n    if (typeof elem.getBoundingClientRect !== undefined) {\n        box = elem.getBoundingClientRect();\n    }\n\n    return {\n        top: box.top + (window.pageYOffset || elem.scrollTop) - (elem.clientTop || 0),\n        left: box.left + (window.pageXOffset || elem.scrollLeft) - (elem.clientLeft || 0)\n    };\n};\n\nexport const _findObjectInTree = (array, id) => {\n    let result = null;\n\n    _traverseChildren(array, item => {\n        if (item['$$id'] === Number.parseInt(id)) {\n            result = item;\n            return true;\n        }\n    });\n\n    return result;\n};\n","import { NestableSettings } from './nestable.models';\n\nexport const REGISTER_HANDLE = 'NESTABLE_DRAG_HANDLE_REGISTER';\nexport const DRAG_START = 'NESTABLE_DRAG_HANDLE_START';\nexport const EXPAND_COLLAPSE = 'NESTABLE_EXPAND_COLLAPSE_EVENT';\n\nexport const defaultSettings = {\n    listNodeName: 'ul',\n    itemNodeName: 'li',\n    rootClass: 'dd',\n    listClass: 'dd-list',\n    itemClass: 'dd-item',\n    dragClass: 'dd-dragel',\n    handleClass: 'dd-handle',\n    collapsedClass: 'dd-collapsed',\n    placeClass: 'dd-placeholder',\n    group: 0, // TODO\n    maxDepth: 5,\n    threshold: 20,\n    fixedDepth: false, // fixed item's depth\n    exportCollapsed: true, // TODO\n    disableDrag: false,\n} as NestableSettings;\n\nexport const mouse = {\n    moving: 0,\n    offsetX: 0,\n    offsetY: 0,\n    startX: 0,\n    startY: 0,\n    lastX: 0,\n    lastY: 0,\n    nowX: 0,\n    nowY: 0,\n    distX: 0,\n    distY: 0,\n    dirAx: 0,\n    dirX: 0,\n    dirY: 0,\n    lastDirX: 0,\n    lastDirY: 0,\n    distAxX: 0,\n    distAxY: 0\n};\n","import {\n  Component,\n  OnInit,\n  Output,\n  Input,\n  EventEmitter,\n  ViewContainerRef,\n  Renderer2,\n  ElementRef,\n  ViewEncapsulation,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  OnDestroy,\n  NgZone\n} from '@angular/core';\n\nimport * as helper from './nestable.helper';\n\nimport {\n  defaultSettings,\n  mouse,\n  REGISTER_HANDLE,\n  DRAG_START,\n  EXPAND_COLLAPSE\n} from './nestable.constant';\nimport { NestableSettings } from './nestable.models';\n\nconst PX = 'px';\nconst hasPointerEvents = (function() {\n  const el = document.createElement('div'),\n    docEl = document.documentElement;\n\n  if (!('pointerEvents' in el.style)) {\n    return false;\n  }\n\n  el.style.pointerEvents = 'auto';\n  el.style.pointerEvents = 'x';\n  docEl.appendChild(el);\n  const supports =\n    window.getComputedStyle &&\n    window.getComputedStyle(el, '').pointerEvents === 'auto';\n  docEl.removeChild(el);\n  return !!supports;\n})();\n\n@Component({\n  selector: 'ngx-nestable',\n  template: `\n    <ng-container *ngTemplateOutlet=\"nestableList; context:{nestable: list, depth: 0}\">\n    </ng-container>\n\n    <ng-template #nestableList let-nestable=\"nestable\" let-depth=\"depth\">\n      <ul [style.padding-left.px]=\"depth ? options.threshold : 0\"\n        [class]=\"options.listClass\">\n        <li [class]=\"options.itemClass\" [id]=\"item.$id\" *ngFor=\"let item of nestable\">\n\n          <ng-container *ngTemplateOutlet=\"nestableItem; context:{nestable: nestable, item: item, depth: depth}\">\n          </ng-container>\n\n          <ng-container *ngIf=\"item.children && item.$expanded\">\n            <ng-container *ngTemplateOutlet=\"nestableList; context:{nestable: item.children, depth: depth + 1}\">\n            </ng-container>\n          </ng-container>\n\n          <ul [class]=\"options.listClass\" [style.padding-left.px]=\"options.threshold\"></ul>\n        </li>\n      </ul>\n    </ng-template>\n\n    <ng-template #nestableItem let-parentList=\"nestable\" let-item=\"item\" let-depth=\"depth\">\n      <div class=\"nestable-item-container mat-list-item\" (mousedown)=\"dragStartFromItem($event, item, parentList)\">\n        <ng-container *ngTemplateOutlet=\"template; context:{$implicit: {item: item, parentList: parentList}, depth: depth}\">\n        </ng-container>\n\n        <div class=\"nestable-item-mask\"></div>\n      </div>\n    </ng-template>\n  `,\n  styles: [`\n    @import url(\"https://fonts.googleapis.com/css?family=Roboto\");\n    ul .dd-placeholder {\n      margin: 5px 0;\n      padding: 0;\n      min-height: 30px;\n      background: #f2fbff;\n      border: 1px dashed #b6bcbf;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box; }\n\n    ul li .nestable-item-mask {\n      display: none;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      right: 0;\n      left: 0;\n      z-index: 9998; }\n\n    ul li .nestable-expand-button {\n      display: block;\n      position: relative;\n      cursor: pointer;\n      float: left;\n      width: 25px;\n      height: 14px;\n      padding: 0;\n      white-space: nowrap;\n      overflow: hidden;\n      border: 0;\n      background: transparent;\n      font-size: 18px;\n      line-height: 1;\n      text-align: center;\n      font-weight: bold;\n      outline: 0; }\n\n    ul li .nestable-item-container {\n      position: relative;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-orient: horizontal;\n      -webkit-box-direction: normal;\n          -ms-flex-direction: row;\n              flex-direction: row;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      color: rgba(0, 0, 0, 0.87);\n      min-height: 32px;\n      font-size: 16px;\n      font-family: 'Roboto', sans-serif;\n      cursor: pointer;\n      outline: 0;\n      margin-bottom: 2px;\n      padding-left: 8px; }\n\n    ul li .nestable-item-container:hover {\n      background: rgba(0, 0, 0, 0.04); }\n\n    ol, ul {\n      list-style: none; }\n  `],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class NestableComponent implements OnInit, OnDestroy {\n  @Output() public listChange = new EventEmitter();\n  @Output() public drop = new EventEmitter();\n  @Output() public drag = new EventEmitter();\n  @Output() public disclosure = new EventEmitter();\n\n  @Input() public template: ViewContainerRef;\n  @Input() public options = defaultSettings;\n  @Input() public disableDrag = false;\n  @Input()\n  public get list() {\n    return this._list;\n  }\n  public set list(list) {\n    this._list = list;\n    this._generateItemIds();\n  }\n\n  public dragRootEl = null;\n  public dragEl = null;\n  public dragModel = null;\n  public moving = false;\n\n  /**\n   * Dragged element contains children, and those children contain other children and so on...\n   * This property gives you the number of generations contained within the dragging item.\n   */\n  public dragDepth = 0;\n\n  /**\n   * The depth of dragging item relative to element root (ngx-nestable)\n   */\n  public relativeDepth = 0;\n\n  public hasNewRoot = false;\n  public pointEl = null;\n  public items = [];\n\n  private _componentActive = false;\n  private _mouse = Object.assign({}, mouse);\n  private _list = [];\n  // private _options = Object.assign({}, defaultSettings) as NestableSettings;\n  private _cancelMousemove: Function;\n  private _cancelMouseup: Function;\n  private _placeholder;\n  private _itemId = 0;\n  private _registerHandleDirective = false;\n  private _dragIndex;\n  private _parentDragId;\n  private _oldListLength: any;\n\n  constructor(\n    private ref: ChangeDetectorRef,\n    private renderer: Renderer2,\n    private el: ElementRef,\n    private zone: NgZone\n  ) {}\n\n  ngOnInit(): void {\n    // set/extend default options\n    this._componentActive = true;\n    const optionKeys = Object.keys(defaultSettings);\n    for (const key of optionKeys) {\n      if (typeof this.options[key] === 'undefined') {\n        this.options[key] = defaultSettings[key];\n      }\n    }\n\n    this._generateItemIds();\n    this._generateItemExpanded();\n    this._createHandleListener();\n  }\n\n  ngOnDestroy(): void {}\n\n  private _generateItemIds() {\n    helper._traverseChildren(this._list, item => {\n      item['$$id'] = this._itemId++;\n    });\n  }\n\n  private _generateItemExpanded() {\n    helper._traverseChildren(this._list, item => {\n      if (typeof item.expanded === 'undefined') {\n        item['$$expanded'] = true;\n      } else {\n        item['$$expanded'] = item.expanded;\n      }\n    });\n  }\n\n  private _createHandleListener() {\n    this.renderer.listen(this.el.nativeElement, REGISTER_HANDLE, () => {\n      this._registerHandleDirective = true;\n    });\n\n    this.renderer.listen(this.el.nativeElement, DRAG_START, data => {\n      this.dragStart(\n        data.detail.event,\n        data.detail.param.item,\n        data.detail.param.parentList\n      );\n    });\n\n    this.renderer.listen(this.el.nativeElement, EXPAND_COLLAPSE, data => {\n      this.disclosure.emit({\n        item: data.detail.item,\n        expanded: data.detail.item['$$expanded']\n      });\n    });\n  }\n\n  private _createDragClone(event, dragItem) {\n    this._mouseStart(event, dragItem);\n\n    if (!this._registerHandleDirective) {\n      this._mouse.offsetY = dragItem.nextElementSibling\n        ? dragItem.nextElementSibling.clientHeight / 2\n        : dragItem.clientHeight / 2;\n    }\n\n    // create drag clone\n    this.dragEl = document.createElement(this.options.listNodeName);\n    document.body.appendChild(this.dragEl);\n\n    this.renderer.addClass(this.dragEl, this.options.dragClass);\n\n    // add drag clone to body and set css\n    this.renderer.setStyle(\n      this.dragEl,\n      'left',\n      event.pageX - this._mouse.offsetX + PX\n    );\n    this.renderer.setStyle(\n      this.dragEl,\n      'top',\n      event.pageY - this._mouse.offsetY + PX\n    );\n    this.renderer.setStyle(this.dragEl, 'position', 'absolute');\n    this.renderer.setStyle(this.dragEl, 'z-index', 9999);\n    this.renderer.setStyle(this.dragEl, 'pointer-events', 'none');\n  }\n\n  private _createPlaceholder(event, dragItem) {\n    this._placeholder = document.createElement('div');\n    this._placeholder.classList.add(this.options.placeClass);\n    helper._insertAfter(this._placeholder, dragItem);\n    dragItem.parentNode.removeChild(dragItem);\n    this.dragEl.appendChild(dragItem);\n    this.dragRootEl = dragItem;\n  }\n\n  /**\n   * Sets depth proerties (relative and drag)\n   */\n  private _calculateDepth() {\n    // total depth of dragging item\n    let depth;\n    const items = this.dragEl.querySelectorAll(this.options.itemNodeName);\n    for (let i = 0; i < items.length; i++) {\n      depth = helper._getParents(items[i], this.dragEl).length;\n      if (depth > this.dragDepth) {\n        this.dragDepth = depth;\n      }\n    }\n\n    // depth relative to root\n    this.relativeDepth = helper._getParents(\n      this._placeholder,\n      this.el.nativeElement.querySelector(this.options.listNodeName)\n    ).length;\n  }\n\n  private _mouseStart(event, dragItem) {\n    this._mouse.offsetX = event.pageX - helper._offset(dragItem).left;\n    this._mouse.offsetY = event.pageY - helper._offset(dragItem).top;\n    this._mouse.startX = this._mouse.lastX = event.pageX;\n    this._mouse.startY = this._mouse.lastY = event.pageY;\n  }\n\n  private _mouseUpdate(event) {\n    // mouse position last events\n    this._mouse.lastX = this._mouse.nowX;\n    this._mouse.lastY = this._mouse.nowY;\n    // mouse position this events\n    this._mouse.nowX = event.pageX;\n    this._mouse.nowY = event.pageY;\n    // distance mouse moved between events\n    this._mouse.distX = this._mouse.nowX - this._mouse.lastX;\n    this._mouse.distY = this._mouse.nowY - this._mouse.lastY;\n    // direction mouse was moving\n    this._mouse.lastDirX = this._mouse.dirX;\n    this._mouse.lastDirY = this._mouse.dirY;\n    // direction mouse is now moving (on both axis)\n    this._mouse.dirX =\n      this._mouse.distX === 0 ? 0 : this._mouse.distX > 0 ? 1 : -1;\n    this._mouse.dirY =\n      this._mouse.distY === 0 ? 0 : this._mouse.distY > 0 ? 1 : -1;\n  }\n\n  private _showMasks() {\n    const masks = this.el.nativeElement.getElementsByClassName(\n      'nestable-item-mask'\n    );\n    for (let i = 0; i < masks.length; i++) {\n      masks[i].style.display = 'block';\n    }\n  }\n\n  private _hideMasks() {\n    const masks = this.el.nativeElement.getElementsByClassName(\n      'nestable-item-mask'\n    );\n    for (let i = 0; i < masks.length; i++) {\n      masks[i].style.display = 'none';\n    }\n  }\n\n  /**\n   * calc mouse traverse distance on axis\n   * @param m - mouse\n   */\n  private _calcMouseDistance(m) {\n    m.distAxX += Math.abs(m.distX);\n    if (m.dirX !== 0 && m.dirX !== m.lastDirX) {\n      m.distAxX = 0;\n    }\n\n    m.distAxY += Math.abs(m.distY);\n    if (m.dirY !== 0 && m.dirY !== m.lastDirY) {\n      m.distAxY = 0;\n    }\n  }\n\n  private _move(event) {\n    let depth, list;\n\n    const dragRect = this.dragEl.getBoundingClientRect();\n    this.renderer.setStyle(\n      this.dragEl,\n      'left',\n      event.pageX - this._mouse.offsetX + PX\n    );\n    this.renderer.setStyle(\n      this.dragEl,\n      'top',\n      event.pageY - this._mouse.offsetY + PX\n    );\n\n    this._mouseUpdate(event);\n\n    // axis mouse is now moving on\n    const newAx =\n      Math.abs(this._mouse.distX) > Math.abs(this._mouse.distY) ? 1 : 0;\n\n    // do nothing on first move\n    if (!this._mouse.moving) {\n      this._mouse.dirAx = newAx;\n      this._mouse.moving = 1;\n      return;\n    }\n\n    // calc distance moved on this axis (and direction)\n    if (this._mouse.dirAx !== newAx) {\n      this._mouse.distAxX = 0;\n      this._mouse.distAxY = 0;\n    } else {\n      this._calcMouseDistance(this._mouse);\n    }\n    this._mouse.dirAx = newAx;\n\n    // find list item under cursor\n    if (!hasPointerEvents) {\n      this.dragEl.style.visibility = 'hidden';\n    }\n\n    const pointEl = document.elementFromPoint(\n      event.pageX - document.body.scrollLeft,\n      event.pageY - (window.pageYOffset || document.documentElement.scrollTop)\n    );\n\n    if (!hasPointerEvents) {\n      this.dragEl.style.visibility = 'visible';\n    }\n\n    if (\n      pointEl &&\n      (pointEl.classList.contains('nestable-item-mask') ||\n        pointEl.classList.contains(this.options.placeClass))\n    ) {\n      this.pointEl = pointEl.parentElement.parentElement;\n    } else {\n      return;\n    }\n\n    /**\n     * move horizontal\n     */\n    if (\n      !this.options.fixedDepth &&\n      this._mouse.dirAx &&\n      this._mouse.distAxX >= this.options.threshold\n    ) {\n      // reset move distance on x-axis for new phase\n      this._mouse.distAxX = 0;\n      const previous = this._placeholder.previousElementSibling;\n\n      // increase horizontal level if previous sibling exists, is not collapsed, and can have children\n      if (this._mouse.distX > 0 && previous) {\n        list = previous.querySelectorAll(this.options.listNodeName);\n        list = list[list.length - 1];\n\n        // check if depth limit has reached\n        depth = helper._getParents(\n          this._placeholder,\n          this.el.nativeElement.querySelector(this.options.listNodeName)\n        ).length;\n\n        if (depth + this.dragDepth <= this.options.maxDepth) {\n          // create new sub-level if one doesn't exist\n          if (!list) {\n            list = document.createElement(this.options.listNodeName);\n            list.style.paddingLeft = this.options.threshold + PX;\n            list.appendChild(this._placeholder);\n            previous.appendChild(list);\n            // this.setParent(previous);\n          } else {\n            // else append to next level up\n            list = previous.querySelector(\n              `:scope > ${this.options.listNodeName}`\n            );\n            list.appendChild(this._placeholder);\n          }\n        }\n      }\n      // decrease horizontal level\n      if (this._mouse.distX < 0) {\n        // we can't decrease a level if an item preceeds the current one\n        const next = document.querySelector(\n          `.${this.options.placeClass} + ${this.options.itemNodeName}`\n        );\n        const parentElement = this._placeholder.parentElement;\n        if (!next && parentElement) {\n          const closestItem = helper._closest(\n            this._placeholder,\n            this.options.itemNodeName\n          );\n\n          if (closestItem) {\n            parentElement.removeChild(this._placeholder);\n            helper._insertAfter(this._placeholder, closestItem);\n          }\n        }\n      }\n    }\n\n    if (!pointEl.classList.contains('nestable-item-mask')) {\n      return;\n    }\n\n    // find root list of item under cursor\n    const pointElRoot = helper._closest(\n        this.pointEl,\n        `.${this.options.rootClass}`\n      ),\n      isNewRoot = pointElRoot\n        ? this.dragRootEl.dataset['nestable-id'] !==\n          pointElRoot.dataset['nestable-id']\n        : false;\n\n    /**\n     * move vertical\n     */\n    if (!this._mouse.dirAx || isNewRoot) {\n      // check if groups match if dragging over new root\n      if (\n        isNewRoot &&\n        this.options.group !== pointElRoot.dataset['nestable-group']\n      ) {\n        return;\n      }\n\n      // check depth limit\n      depth =\n        this.dragDepth -\n        1 +\n        helper._getParents(\n          this.pointEl,\n          this.el.nativeElement.querySelector(this.options.listNodeName)\n        ).length;\n\n      if (depth > this.options.maxDepth) {\n        return;\n      }\n\n      const before =\n        event.pageY <\n        helper._offset(this.pointEl).top + this.pointEl.clientHeight / 2;\n      const placeholderParent = this._placeholder.parentNode;\n\n      // get point element depth\n      let pointRelativeDepth;\n      pointRelativeDepth = helper._getParents(\n        this.pointEl,\n        this.el.nativeElement.querySelector(this.options.listNodeName)\n      ).length;\n\n      if (this.options.fixedDepth) {\n        if (pointRelativeDepth === this.relativeDepth - 1) {\n          const childList = this.pointEl.querySelector(\n            this.options.listNodeName\n          );\n          if (!childList.children.length) {\n            childList.appendChild(this._placeholder);\n          }\n        } else if (pointRelativeDepth === this.relativeDepth) {\n          if (before) {\n            this.pointEl.parentElement.insertBefore(\n              this._placeholder,\n              this.pointEl\n            );\n          } else {\n            helper._insertAfter(this._placeholder, this.pointEl);\n          }\n\n          if (\n            Array.prototype.indexOf.call(\n              this.pointEl.parentElement.children,\n              this.pointEl\n            ) ===\n            this.pointEl.parentElement.children.length - 1\n          ) {\n            helper._insertAfter(this._placeholder, this.pointEl);\n          }\n        }\n      } else if (before) {\n        this.pointEl.parentElement.insertBefore(\n          this._placeholder,\n          this.pointEl\n        );\n      } else {\n        helper._insertAfter(this._placeholder, this.pointEl);\n      }\n    }\n  }\n\n  public reset() {\n    const keys = Object.keys(this._mouse);\n    for (const key of keys) {\n      this._mouse[key] = 0;\n    }\n\n    this._itemId = 0;\n    this.moving = false;\n    this.dragEl = null;\n    this.dragRootEl = null;\n    this.dragDepth = 0;\n    this.relativeDepth = 0;\n    this.hasNewRoot = false;\n    this.pointEl = null;\n  }\n\n  public dragStartFromItem(event, item, parentList) {\n    if (!this._registerHandleDirective) {\n      this.dragStart(event, item, parentList);\n    }\n  }\n\n  private dragStart(event, item, parentList) {\n\n    this._oldListLength = this.list.length;\n\n    if (!this.options.disableDrag) {\n      event.stopPropagation();\n      event.preventDefault();\n\n      if (event.originalEvent) {\n        event = event.originalEvent;\n      }\n\n      // allow only first mouse button\n      if (event.type.indexOf('mouse') === 0) {\n        if (event.button !== 0) {\n          return;\n        }\n      } else {\n        if (event.touches.length !== 1) {\n          return;\n        }\n      }\n\n      this.ref.detach();\n      this._dragIndex = parentList.indexOf(item);\n      this.dragModel = parentList.splice(parentList.indexOf(item), 1)[0];\n\n      const dragItem = helper._closest(event.target, this.options.itemNodeName);\n      if (dragItem === null) {\n        return;\n      }\n      this._parentDragId = Number.parseInt(\n        dragItem.parentElement.parentElement.id\n      );\n\n      const dragRect = dragItem.getBoundingClientRect();\n\n      this._showMasks();\n      this._createDragClone(event, dragItem);\n      this.renderer.setStyle(this.dragEl, 'width', dragRect.width + PX);\n\n      this._createPlaceholder(event, dragItem);\n      this.renderer.setStyle(this._placeholder, 'height', dragRect.height + PX);\n\n      this._calculateDepth();\n      this.drag.emit({\n        originalEvent: event,\n        item\n      });\n\n      this._cancelMouseup = this.renderer.listen(\n        document,\n        'mouseup',\n        this.dragStop.bind(this)\n      );\n      this._cancelMousemove = this.renderer.listen(\n        document,\n        'mousemove',\n        this.dragMove.bind(this)\n      );\n    }\n  }\n\n  public dragStop(event) {\n    this._cancelMouseup();\n    this._cancelMousemove();\n    this._hideMasks();\n\n    if (this.dragEl) {\n      const draggedId = Number.parseInt(this.dragEl.firstElementChild.id);\n      let placeholderContainer = helper._closest(\n        this._placeholder,\n        this.options.itemNodeName\n      );\n\n      let changedElementPosition =\n        this._dragIndex !==\n        Array.prototype.indexOf.call(\n          this._placeholder.parentElement.children,\n          this._placeholder\n        );\n\n      const index = Array.prototype.indexOf.call(this._placeholder.parentElement.children, this._placeholder);\n\n      if ((this._dragIndex === index) && (this._oldListLength === this.list.length)) {\n        changedElementPosition = true;\n      }\n\n      // placeholder in root\n      if (placeholderContainer === null) {\n        this.list.splice(\n          Array.prototype.indexOf.call(\n            this._placeholder.parentElement.children,\n            this._placeholder\n          ),\n          0,\n          { ...this.dragModel }\n        );\n      } else {\n        // palceholder nested\n        placeholderContainer = helper._findObjectInTree(\n          this.list,\n          Number.parseInt(placeholderContainer.id)\n        );\n        if (!placeholderContainer.children) {\n          placeholderContainer.children = [];\n          placeholderContainer.children.push({ ...this.dragModel });\n        } else {\n          placeholderContainer.children.splice(\n            Array.prototype.indexOf.call(\n              this._placeholder.parentElement.children,\n              this._placeholder\n            ),\n            0,\n            { ...this.dragModel }\n          );\n        }\n        if (index === this._dragIndex) {\n          changedElementPosition = false;\n        }\n        if (!changedElementPosition) {\n          changedElementPosition =\n            placeholderContainer['$$id'] !== this._parentDragId;\n        }\n      }\n\n      this._placeholder.parentElement.removeChild(this._placeholder);\n      this.dragEl.parentNode.removeChild(this.dragEl);\n      this.dragEl.remove();\n      this.reset();\n\n      this.listChange.emit(this.list);\n      this.drop.emit({\n        originalEvent: event,\n        destination: placeholderContainer,\n        item: this.dragModel,\n        changedElementPosition\n      });\n      this.ref.reattach();\n    }\n  }\n\n  public dragMove(event) {\n    if (this.dragEl) {\n      event.preventDefault();\n\n      if (event.originalEvent) {\n        event = event.originalEvent;\n      }\n      this._move(event.type.indexOf('mouse') === 0 ? event : event.touches[0]);\n    }\n  }\n\n  public expandAll() {\n    helper._traverseChildren(this._list, item => {\n      item['$$expanded'] = true;\n    });\n    this.ref.markForCheck();\n  }\n\n  public collapseAll() {\n    helper._traverseChildren(this._list, item => {\n      item['$$expanded'] = false;\n    });\n    this.ref.markForCheck();\n  }\n}\n","import {\n  Directive,\n  OnInit,\n  ElementRef,\n  HostListener,\n  Input,\n  Output\n} from '@angular/core';\n\nimport { REGISTER_HANDLE, DRAG_START } from '../nestable.constant';\n\n@Directive({\n  selector: '[ngxNestableDragHandle]'\n})\nexport class NestableDragHandleDirective implements OnInit {\n  @Input() public ngxNestableDragHandle;\n\n  @HostListener('mousedown', ['$event'])\n  public onMouseDown(event) {\n    const detail = {\n      param: this.ngxNestableDragHandle,\n      event: event\n    };\n    this._el.nativeElement.dispatchEvent(\n      new CustomEvent(DRAG_START, { bubbles: true, detail: detail })\n    );\n  }\n\n  constructor(private _el: ElementRef) {}\n\n  ngOnInit(): void {\n    this._el.nativeElement.dispatchEvent(\n      new CustomEvent(REGISTER_HANDLE, { bubbles: true, detail: this.ngxNestableDragHandle })\n    );\n  }\n}\n","import { Directive, ElementRef, HostListener, Input } from '@angular/core';\nimport { EXPAND_COLLAPSE } from '../nestable.constant';\n\n@Directive({\n  selector: '[ngxNestableExpandCollapse]'\n})\nexport class NestableExpandCollapseDirective {\n  @Input() public ngxNestableExpandCollapse;\n\n  constructor(private _el: ElementRef) {}\n\n  @HostListener('mousedown', ['$event'])\n  public onMouseDown(event) {\n    event.stopPropagation();\n  }\n\n  @HostListener('click', ['$event'])\n  public onClick(event) {\n    this.ngxNestableExpandCollapse.item['$$expanded'] = !this.ngxNestableExpandCollapse.item['$$expanded'];\n    this._el.nativeElement.dispatchEvent(\n      new CustomEvent(EXPAND_COLLAPSE, {\n        bubbles: true,\n        detail: this.ngxNestableExpandCollapse\n      })\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NestableComponent } from './nestable.component';\nimport { NestableDragHandleDirective } from './nestable-drag-handle/nestable-drag-handle.directive';\n\nimport { NestableExpandCollapseDirective } from './nestable-expand-collapse-handle/nestable-expand-collapse.directive';\n@NgModule({\n    imports: [CommonModule],\n    declarations: [\n        NestableComponent,\n        NestableDragHandleDirective,\n        NestableExpandCollapseDirective\n    ],\n    exports: [\n        NestableComponent,\n        NestableDragHandleDirective,\n        NestableExpandCollapseDirective\n    ]\n})\nexport class NestableModule { }\n"],"names":["_traverseChildren","tree","callback","parent","i","length","item","children","_insertAfter","newNode","referenceNode","parentNode","insertBefore","nextSibling","_getParents","el","parentSelector","document","body","parents","o","tagName","push","_closest","selector","matchesFn","some","fn","parentElement","matches","_offset","elem","box","top","left","getBoundingClientRect","undefined","window","pageYOffset","scrollTop","clientTop","pageXOffset","scrollLeft","clientLeft","REGISTER_HANDLE","DRAG_START","EXPAND_COLLAPSE","defaultSettings","listNodeName","itemNodeName","rootClass","listClass","itemClass","dragClass","handleClass","collapsedClass","placeClass","group","maxDepth","threshold","fixedDepth","exportCollapsed","disableDrag","mouse","moving","offsetX","offsetY","startX","startY","lastX","lastY","nowX","nowY","distX","distY","dirAx","dirX","dirY","lastDirX","lastDirY","distAxX","distAxY","PX","hasPointerEvents","createElement","docEl","documentElement","style","pointerEvents","appendChild","supports","getComputedStyle","removeChild","NestableComponent","ref","renderer","zone","this","listChange","EventEmitter","drop","drag","disclosure","options","dragRootEl","dragEl","dragModel","dragDepth","relativeDepth","hasNewRoot","pointEl","items","_componentActive","_mouse","Object","assign","_list","_itemId","_registerHandleDirective","defineProperty","prototype","get","set","list","_generateItemIds","ngOnInit","_i","optionKeys_1","keys","key","_generateItemExpanded","_createHandleListener","ngOnDestroy","_this","helper._traverseChildren","expanded","listen","nativeElement","data","dragStart","detail","event","param","parentList","emit","_createDragClone","dragItem","_mouseStart","nextElementSibling","clientHeight","addClass","setStyle","pageX","pageY","_createPlaceholder","_placeholder","classList","add","helper._insertAfter","_calculateDepth","depth","querySelectorAll","helper._getParents","querySelector","helper._offset","_mouseUpdate","_showMasks","masks","getElementsByClassName","display","_hideMasks","_calcMouseDistance","m","Math","abs","_move","newAx","visibility","elementFromPoint","contains","previous","previousElementSibling","paddingLeft","next","closestItem","helper._closest","pointElRoot","isNewRoot","dataset","pointRelativeDepth","before","childList","Array","indexOf","call","reset","keys_1","dragStartFromItem","_oldListLength","stopPropagation","preventDefault","originalEvent","type","button","touches","detach","_dragIndex","splice","target","_parentDragId","Number","parseInt","id","dragRect","width","height","_cancelMouseup","dragStop","bind","_cancelMousemove","dragMove","firstElementChild","placeholderContainer","changedElementPosition","index","array","result","remove","destination","reattach","expandAll","markForCheck","collapseAll","decorators","Component","args","template","styles","encapsulation","ViewEncapsulation","None","changeDetection","ChangeDetectionStrategy","OnPush","ctorParameters","ChangeDetectorRef","Renderer2","ElementRef","NgZone","propDecorators","Output","Input","NestableDragHandleDirective","_el","onMouseDown","ngxNestableDragHandle","dispatchEvent","CustomEvent","bubbles","Directive","HostListener","NestableExpandCollapseDirective","onClick","ngxNestableExpandCollapse","NestableModule","NgModule","imports","CommonModule","declarations","exports"],"mappings":"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"}
